@use 'variables' as *;

// --- Universal Box Sizing Reset ---
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }

// --- General Body Styles ---
body {
	background-color: var(--color-website-background-color);
	color: var(--color-primary-text-color);
}

// --- Main Site Wrapper (#page.site) ---
// This now ONLY wraps the main content and sidebars.

.site {
	// The container class will be added to this element in our templates.
}

// --- Reusable Container Class ---
// Used inside the full-width header/footer to align their content.
.container {
	width: 100%;
	max-width: $content-width;
	margin-left: auto;
	margin-right: auto;
	padding-left: $spacing-unit * 1.5;
	padding-right: $spacing-unit * 1.5;
}

// --- Global Layout Modifiers ---
.layout-boxed {
	// In Boxed mode, the header, content, and footer are all contained.
	.site-header,
	.site-footer,
	.site {
		max-width: 1240px; // A generous width for the "box".
		margin-left: auto;
		margin-right: auto;
	}

	.site {
		margin-top: $spacing-unit;
		margin-bottom: $spacing-unit;
		padding: $spacing-unit * 2;
		background-color: var(--color-content-background-color);
		border: 1px solid $color-border;
	}
}
// Note: .layout-full-width requires no special rules here, as it's the default behavior.

// --- Sidebar Layout System (using Flexbox) ---
.site-content-grid {
	display: flex;
	flex-wrap: wrap;
	gap: $spacing-unit * 2;
}

#primary {
	flex-grow: 1;
	min-width: 0; // Prevents content from overflowing its container
}

#secondary,
#tertiary {
	flex-shrink: 0; // Prevent sidebars from shrinking
	display: none; // Hide sidebars by default
}

// Conditionally show and size sidebars based on body class
.layout-sidebar-right {
	#primary { width: calc(75% - ($spacing-unit * 1)); }
	#secondary { width: calc(25% - ($spacing-unit * 1)); display: block; }
	#tertiary { display: none; }
}

.layout-sidebar-left {
	#primary { width: calc(75% - ($spacing-unit * 1)); order: 2; }
	#secondary { width: calc(25% - ($spacing-unit * 1)); order: 1; display: block; }
	#tertiary { display: none; }
}

.layout-sidebar-both {
	#primary { width: calc(50% - ($spacing-unit * 2)); order: 2; }
	#secondary { width: calc(25% - ($spacing-unit * 1)); order: 1; display: block; }
	#tertiary { width: calc(25% - ($spacing-unit * 1)); order: 3; display: block; }
}

.layout-sidebar-double-right {
	#primary { width: calc(50% - ($spacing-unit * 2)); }
	#secondary { width: calc(25% - ($spacing-unit * 1)); display: block; }
	#tertiary { width: calc(25% - ($spacing-unit * 1)); display: block; }
}


// --- Block Alignment Grid (for single posts/pages) ---
// This ensures blocks inside content are centered but can break out.
.entry-content {
	> * {
		max-width: $content-width;
		margin-left: auto;
		margin-right: auto;
	}

	> .alignwide {
		max-width: $content-width + 200px;
	}

	> .alignfull {
		max-width: none;
		width: 100%;
	}
}


// --- Styles for post listings ---
.post {
	padding-bottom: $spacing-unit;
	margin-bottom: $spacing-unit;
	border-bottom: 1px solid $color-border;
}